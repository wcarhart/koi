<p align="center"><img alt="koi logo" src="logo.png" /></p>

<h1 align="center">koi</h1>
<p align="center">Bashful argument parsing</p>

![CI](https://github.com/wcarhart/koi/workflows/CI/badge.svg)

## Quick Examples
Easily add command line arguments for Bash functions! Inspired by Python's [argparse](https://docs.python.org/3/library/argparse.html).
```bash
function sendrequest {
    __addarg "-h" "--help" "help" "optional" "" "Send an HTTP request"
    __addarg "-m" "--method" "storevalue" "optional" "GET" "The HTTP method"
    __addarg "-u" "--url" "storevalue" "required" "" "The url of the HTTP request"
    __parseargs "$@"
    curl -X "$method" "$url"
}
```
```bash
function checkstockprice {
    __addarg "-h" "--help" "help" "optional" "" "Check a stock's price"
    __addarg "" "symbol" "positionalarray" "required" "" "The ticker symbol(s) to check"
    __addarg "-e" "--exchange" "storevalue" "optional" "NYSE" "The exchange to use"
    __addarg "-p" "--port" "storevalue" "required" "" "The port to use"
    __addarg "-q" "--quiet" "flag" "optional" "" "If included, run in quiet mode"
    __parseargs "$@"
    # check the stock price
}
```
For more examples, check the [Examples](https://www.willcarhart.dev/docs/koi/#/examples) section in the documentation.

For documentation, see [the full documentation](https://www.willcarhart.dev/docs/koi/).

## Installation
Install via Homebrew:
```bash
brew install wcarhart/tools/koi
```
For other installation options, see the [Installation](https://www.willcarhart.dev/docs/koi/#/installation) section in the documentation.

## Documentation
Please visit the [documentation site](https://www.willcarhart.dev/docs/koi/) for full documentation.

## Setup
To start using `koi`, simply source it at the top of your Bash script.
```bash
#!/bin/bash
source koi
```

Also at the top of your script, but below sourcing koi, you should override the `koiname` and `koidescription` variables. The values of `koiname` and `koidescription` get printed in error messages and help text. Koi ships with default values if they are not set.
```bash
#!/bin/bash
source koi
koiname=nameofyourscript.sh
koidescription="A longer description of your script"
```

## Examples
_Positional Arguments_
```bash
myscript.sh arg0 arg1 arg2
```
_Short Options_ and _Long Options_
```bash
myscript.sh -a foo -b bar --longoption baz
```
_Array Options_
```bash
myscript.sh -a arg0 -a arg1 -a arg2
```
_Flags_ (options without an argument)
```bash
myscript.sh -f -q
```
_Joint Options_
```bash
myscript.sh -ab       # resolves to: myscript.sh -a -b
```
_Autogenerated Help Menus_
```bash
myscript.sh --help    # show autogenerated help menu
```
_Subcommands_
```bash
myscript.sh subcommand -a foo --longoption baz arg0 arg1
```
_Mutually Exclusive Groups_
```
myscript.sh (-a | -b)
```
For more examples, check the [Examples](https://www.willcarhart.dev/docs/koi/#/examples) section in the documentation.

## Nomenclature
You may ask, why the name _koi_? Well, the original working name of the library was _Bashful Arg Parser_, which is a mouthful. This was shortened to _Bashful_, to which _coy_ is a synonym. _Koi_ is a homophone of _coy_ and thus was chosen as the name.
